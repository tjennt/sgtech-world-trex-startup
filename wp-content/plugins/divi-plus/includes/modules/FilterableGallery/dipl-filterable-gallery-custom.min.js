!function(e){e.fn.DiviFilterableGalleryInsertAt=function(e,t){let i=this.children().length;return e<0&&(e=Math.max(0,i+1+e)),this.append(t),e<i&&this.children().eq(e).before(this.children().last()),this},e.fn.DiviFilterableGalleryPagination=function(t={}){t=e.extend({},{paginationClass:"dipl_filterable_gallery_pagination",hideOnlyOnePage:!0,totalPages:1,visiblePages:10,startPage:1,initiateStartPageClick:!1,first:!1,last:!1,prev:!1,next:!1},t),this.twbsPagination(t)}}(jQuery),jQuery(function(e){e("body").find(".dipl_filterable_gallery").length>0&&e(".dipl_filterable_gallery").each(function(){let t=e(this),i=t.find(".dipl_filterable_gallery_wrapper"),a={itemSelector:".dipl_filterable_gallery_item",layoutMode:"masonry",percentPosition:!0,resize:!0,masonry:{columnWidth:".dipl_filterable_gallery_item",gutter:".dipl_filterable_gallery_item_gutter"},transitionDuration:parseInt(i.data("isotope_transition_duration"))},l=i.isotope(a);if(l.imagesLoaded(function(){l.isotope("layout"),l.isotope("reloadItems")}),t.find(".dipl_filterable_gallery_pagination_wrapper").length>0){let n=t.find(".dipl_filterable_gallery_pagination_wrapper"),r=n.find("ul"),o={totalPages:(isNaN(n.data("number_of_images"))||0===parseInt(n.data("number_of_images"))||parseInt(n.data("number_of_images")),isNaN(n.data("total_pages"))||0===parseInt(n.data("total_pages"))?1:parseInt(n.data("total_pages"))),onPageClick:function(a,r){let o=n.data();if(i.find(".dipl_filterable_gallery_item_page_"+r).length>0?l.isotope({filter:function(){if(e(this).hasClass("dipl_filterable_gallery_item_page_"+r))return e(this)}}).isotope("revealItemElements",i.find(".dipl_filterable_gallery_item_page_"+r)).isotope("layout"):(o.page=r,i.fadeTo("100",.2),e.ajax({type:"POST",url:DiviPlusFrontendData.ajaxurl,data:{action:"dipl_get_images",dipl_get_images_nonce:DiviPlusFrontendData.ajaxnonce,props:o},success:function(t){if(t.success){let a=e(t.items);l.append(a).isotope("appended",a),l.isotope({filter:function(){if(e(this).hasClass("dipl_filterable_gallery_item_page_"+r))return e(this)}}).isotope("revealItemElements",i.find(".dipl_filterable_gallery_item_page_"+r)).isotope("layout"),i.fadeTo("100",1)}}})),t.offset().top>0){let s=0,d=0,p=0;e("body").find("#top-header").length>0&&e("body").hasClass("et_fixed_nav")&&(s=parseFloat(e("#top-header").innerHeight())),e("body").find("#main-header").length>0&&e("body").hasClass("et_fixed_nav")&&(d=parseFloat(e("#main-header").innerHeight())),e("body").find(".et-l--header").length>0&&e("body").find(".et-l--header .et_builder_inner_content").hasClass("has_et_pb_sticky")&&(p=parseFloat(e(".et-l--header").innerHeight()));let f=s+d+p+50;e("html, body").animate({scrollTop:t.offset().top-f})}}};"on"===n.data("show_prev_next")&&(o.prev=n.data("prev_text"),o.next=n.data("next_text")),r.DiviFilterableGalleryPagination(o)}let s=[],d=[];if(t.find(".dipl_filterable_gallery_pagination_wrapper").length>0){let p=t.find(".dipl_filterable_gallery_pagination_wrapper"),f=p.find("ul"),g=p.data("include_categories");t.find(".dipl_filterable_gallery_filter_categories li").on("click",function(){if(e(this).hasClass("dipl_filterable_gallery_active_category"))return!1;s&&d&&d.length===s.length?e.map(s,function(t,a){i.DiviFilterableGalleryInsertAt(d[a],e(t))}):s&&i.append(s),e(this).parent(".dipl_filterable_gallery_filter_categories").find("li").removeClass("dipl_filterable_gallery_active_category"),e(this).addClass("dipl_filterable_gallery_active_category");let a=e(this).data("category"),n=p.data();if(n.page=1,""!==a){if(1!==parseInt(n.total_pages))n.include_categories=a,n.tax_query_field="term_id";else{let r=[];i.find(".dipl_filterable_gallery_item img").each(function(){if(e(this).data("categories")){let t=e(this).attr("data-categories").split(",");t=e.map(t,function(e){return parseInt(e)}),-1===e.inArray(a,t)?d.push(e(this).closest(".dipl_filterable_gallery_item").index()):r.push(e(this).closest(".dipl_filterable_gallery_item"))}else d.push(e(this).closest(".dipl_filterable_gallery_item").index())}),l.isotope({filter:function(){if(e(this).find("img").data("categories")){let t=e(this).find("img").attr("data-categories").split(",");if(t=e.map(t,function(e){return parseInt(e)}),-1!==e.inArray(a,t))return e(this);s.push(e(this).detach())}else s.push(e(this).detach())}}).isotope("revealItemElements",r).isotope("layout")}}else n.include_categories=g,n.tax_query_field="term_id",1===parseInt(n.total_pages)&&l.isotope({filter:"*"});1!==parseInt(n.total_pages)&&(i.fadeTo("100",.2),e.ajax({type:"POST",url:DiviPlusFrontendData.ajaxurl,data:{action:"dipl_get_images",dipl_get_images_nonce:DiviPlusFrontendData.ajaxnonce,props:n},success:function(r){if(r.success){let o=e(r.items);i.find(".dipl_filterable_gallery_item").remove(),l.append(o).isotope("appended",o),l.isotope({filter:function(){if(e(this).find("img").data("categories")){let t=e(this).find("img").attr("data-categories").split(",");if(t=e.map(t,function(e){return parseInt(e)}),-1!==e.inArray(a,t))return e(this)}}}),i.fadeTo("100",1),isNaN(p.data("number_of_images"))||0===parseInt(p.data("number_of_images"))||parseInt(p.data("number_of_images"));let s={initiateStartPageClick:!0,totalPages:parseInt(r.total_pages),onPageClick:function(a,r){if(i.find(".dipl_filterable_gallery_item_page_"+r).length>0?l.isotope({filter:function(){if(e(this).hasClass("dipl_filterable_gallery_item_page_"+r))return e(this)}}).isotope("revealItemElements",i.find(".dipl_filterable_gallery_item_page_"+r)).isotope("layout"):(n.page=r,i.fadeTo("100",.2),e.ajax({type:"POST",url:DiviPlusFrontendData.ajaxurl,data:{action:"dipl_get_images",dipl_get_images_nonce:DiviPlusFrontendData.ajaxnonce,props:n},success:function(t){if(t.success){let a=e(t.items);l.append(a).isotope("appended",a),l.isotope({filter:function(){if(e(this).hasClass("dipl_filterable_gallery_item_page_"+r))return e(this)}}).isotope("revealItemElements",i.find(".dipl_filterable_gallery_item_page_"+r)).isotope("layout"),i.fadeTo("100",1)}}})),t.offset().top>0){let o=0,s=0,d=0;e("body").find("#top-header").length>0&&e("body").hasClass("et_fixed_nav")&&(o=parseFloat(e("#top-header").innerHeight())),e("body").find("#main-header").length>0&&e("body").hasClass("et_fixed_nav")&&(s=parseFloat(e("#main-header").innerHeight())),e("body").find(".et-l--header").length>0&&e("body").find(".et-l--header .et_builder_inner_content").hasClass("has_et_pb_sticky")&&(d=parseFloat(e(".et-l--header").innerHeight()));let p=o+s+d+50;e("html, body").animate({scrollTop:t.offset().top-p})}}};"on"===p.data("show_prev_next")&&(s.prev=p.data("prev_text"),s.next=p.data("next_text")),f.twbsPagination("destroy"),f.DiviFilterableGalleryPagination(s)}}}))})}else{let c=t.find(".dipl_filterable_gallery_filter_wrapper").data("include_categories");t.on("click",".dipl_filterable_gallery_filter_categories li",function(){if(e(this).hasClass("dipl_filterable_gallery_active_category"))return!1;s&&d&&d.length===s.length?e.map(s,function(t,a){i.DiviFilterableGalleryInsertAt(d[a],e(t))}):s&&i.append(s),e(this).parent(".dipl_filterable_gallery_filter_categories").find("li").removeClass("dipl_filterable_gallery_active_category"),e(this).addClass("dipl_filterable_gallery_active_category"),e(this);let t=e(this).data("category"),a=e(this).closest(".dipl_filterable_gallery_filter_wrapper").data();""!==t?(a.include_categories=t,a.tax_query_field="term_id"):(a.include_categories=c,a.tax_query_field="term_id"),i.fadeTo("100",.2),e.ajax({type:"POST",url:DiviPlusFrontendData.ajaxurl,data:{action:"dipl_get_images",dipl_get_images_nonce:DiviPlusFrontendData.ajaxnonce,props:a},success:function(a){if(a.success){let n=e(a.items);i.find(".dipl_filterable_gallery_item").remove(),l.append(n).isotope("appended",n),""!==t?l.isotope({filter:function(){if(e(this).find("img").data("categories")){let i=e(this).find("img").attr("data-categories").split(",");if(i=e.map(i,function(e){return parseInt(e)}),-1!==e.inArray(t,i))return e(this)}}}):l.isotope({filter:"*"}),i.fadeTo("100",1)}}})})}if("lightbox"===i.data("on_click_trigger")){let h=t.prop("class").match(/(dipl_filterable_gallery\_[^\s]*)/)[0]+"_lightbox",m=i.data("lightbox_effect"),u="none"!==m?parseInt(i.data("lightbox_transition_duration")):0,y="on"===i.data("enable_navigation"),b=e("body");e("body").hasClass("et-tb-has-template")&&(h.includes("_tb_header")?b=e("body").find("#page-container").find("#et-boc .et-l--header"):h.includes("_tb_body")?b=e("body").find("#page-container").find("#et-boc .et-l--body"):h.includes("_tb_footer")&&(b=e("body").find("#page-container").find("#et-boc .et-l--footer"))),i.magnificPopup({delegate:".dipl_filterable_gallery_item",type:"image",prependTo:b,closeOnContentClick:!1,removalDelay:u,closeBtnInside:!1,mainClass:"mfp-img-mobile dipl_filterable_gallery_lightbox "+h+" dipl_mfp_"+m,gallery:{enabled:y,navigateByImgClick:!1,tPrev:"",tNext:"",tCounter:""},zoom:{enabled:"zoom"===m,duration:u,easing:"ease-in-out"},image:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div></div></div>',titleSrc:function(e){return e.el.find(".dipl_filterable_gallery_title_caption_wrapper").length>0?e.el.find(".dipl_filterable_gallery_title_caption_wrapper").html():""},tError:'<a href="%url%">The image</a> could not be loaded.'}});let $=e.magnificPopup.instance;$.open=function(t){if(".dipl_filterable_gallery_item"===t.delegate){let i=[];e.each(t.items,function(t,a){e(a).is(":visible")&&0!==parseFloat(e(a).css("opacity"))&&i.push(a)}),t.items=e(i)}e.magnificPopup.proto.open.call(this,t)},e("body").on("swiperight",".dipl_filterable_gallery_lightbox .mfp-img",function(){$.prev()}),e("body").on("swipeleft",".dipl_filterable_gallery_lightbox .mfp-img",function(){$.next()})}e(window).resize(function(){l.isotope("layout")})})});